<!doctype html>
<html>

  <head>
    <meta charset="utf-8">
    <title>Mathematica</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>@import url(https://fonts.googleapis.com/css?family=Inconsolata);
a { color: #05a; text-decoration: none; }
a:hover, a:focus { text-decoration: underline; }
body {
  max-width: 800px;
  margin: 0 auto;
  padding: 10px;
  font-size: 24px;
  font-family: 'Inconsolata', 'Monospace';
  background-color: #fff;
  color: #000;
  margin-bottom: 50px;
}
h1, h2, h3, h4, h5, h6 {
  font-weight: normal;
}
hr {
  border: none;
  height: 1px;
  background-color: #000;
}
.hidden-link {
  color: inherit;
  text-decoration: none;
}
@media (max-width: 800px) {
  body {
    font-size: 18px;
  }
}
blockquote {
  padding: 0 1em;
  color: #777;
  border-left: 0.25em solid #ddd;
  margin: 0;
}


/* @import url(http://fonts.googleapis.com/css?family=Open+Sans:300,300italic,400,400italic); */
/*
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 400;
  src: local('Open Sans Light'), local('OpenSans-Light'), url(http://themes.googleusercontent.com/static/fonts/opensans/v6/DXI1ORHCpsQm3Vp6mXoaTXhCUOGz7vYGh680lGh-uXM.woff) format('woff');
}
@font-face {
  font-family: 'Open Sans';
  font-style: normal;
  font-weight: 700;
  src: local('Open Sans'), local('OpenSans'), url(http://themes.googleusercontent.com/static/fonts/opensans/v6/cJZKeOuBrn4kERxqtaUH3T8E0i7KZn-EPnyo3HZu7kw.woff) format('woff');
}
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 400;
  src: local('Open Sans Light Italic'), local('OpenSansLight-Italic'), url(http://themes.googleusercontent.com/static/fonts/opensans/v6/PRmiXeptR36kaC0GEAetxh_xHqYgAV9Bl_ZQbYUxnQU.woff) format('woff');
}
@font-face {
  font-family: 'Open Sans';
  font-style: italic;
  font-weight: 700;
  src: local('Open Sans Italic'), local('OpenSans-Italic'), url(http://themes.googleusercontent.com/static/fonts/opensans/v6/xjAJXh38I15wypJXxuGMBobN6UDyHWBl620a-IRfuBk.woff) format('woff');
}
*/

/*html { position: relative; min-height: 100%; font-size:100%; }*/
/*
body { margin: 0 auto 8rem auto; padding:0 1em; max-width:40em;
       font-family:'Open Sans'; color:#333; }
*/
body {
  /*font-family: 'Open Sans';*/
  font-family: 'Inconsolata';
  font-size: 16px;
  color: #000;
}

h1, h2, h3, h4, h5, h6 { font-weight: 300; }
h1 { font-size: 37px; }
h2 { font-size: 32px; }
h3 { font-size: 26px; }

a { color:#0088cc; text-decoration:none; }
a:hover, a:focus { color:#005580; text-decoration:underline; }

/* The font is so thick that it needs to be brighter to fit in. */
/*.MathJax { color: #444; }*/

.content {
  margin: 40px auto 0 auto;
  max-width: 800px;
}

/*.article-title {
  font-size: 275%;
  font-weight: 300;
  font-family: inherit;
  outline: none;
  margin: 2rem 0 1rem 0;
  border: none;
  border-bottom: 1px solid #eee;
  width: 100%;
}
.article-title:after {
  position: absolute;
  font-size: 12px;
  right: 0;
  bottom: -2rem;
  color: #aaa;
}
*/

.date {
  margin-top: -1rem;
  text-align: right;
  font-size: 85%;
  color: #aaa;
  min-height: 19px; /* Height of element when non-empty. */
}

/* Modern Clean CSS Sticky Footer: http://mystrd.at/modern-clean-css-sticky-footer/ */
/*footer       { position:absolute; left:0; bottom:0;   width:100%; }*/
/*footer .wrap { position:absolute; left:0; bottom:1em; width:100%; text-align:center; font-size:0.8rem; }*/

/* Instead I use a footer that is always visible. */
.footer-separator {
  position: fixed;
  left: 0;
  bottom: 25px;
  height: 20px;
  width: 100%;
  z-index: 99;
  background: -webkit-gradient(linear, center bottom, center top, from(rgba(255,255,255,1)), to(rgba(255,255,255,0)));
}
.footer {
  background-color: #fff;
  position: fixed;
  left: 0;
  bottom: 0;
  width: 100%;
  /*text-align: center;*/
  /*font-size: 0.8rem;*/
  /*background: #fafafa;*/
  height: 25px;
  padding: 0;
  margin: 0;
}
.footer-inner {
  position: absolute;
  left: 0;
  bottom: 7px;
  width: 100%;
  text-align: center;
  font-size: 13px;
}
.footer p { margin: 0; }
.footer a { color: inherit !important; }

/* li p:first-child { margin-top: 0; } */
/* li p:last-child { margin-bottom: 0; } */


/* - STYLING CODE - */

/*@import url(http://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400italic,700italic);*/

code {
  color: inherit;
  /* font-family: 'Ubuntu Mono', monospace; */
  font-family: 'Inconsolata', monospace;
  font-size: 14px;
  padding: 2px 3px;
}
h1 code, h2 code, h3 code, h4 code, h5 code, h6 code {
  font-size: inherit;
  background-color: inherit;
  border: inherit;
}
pre code {
  padding: 0;
  border: none;
}
pre {
  line-height: 1;
  padding: 10px;
  overflow: auto;
}
pre, code {
  background-color: #fcfcfc;
  border: 1px solid #eee;
  /*border: 1px solid #e1e1e8;*/
  border-radius: 5px;
}
pre, pre code {
  white-space: pre;
  word-wrap: normal;
}

/* - END STYLING CODE - */



/* - MISC - */

#copyleft {
  -webkit-transform: rotate(180deg);
   -khtml-transform: rotate(180deg);
     -moz-transform: rotate(180deg);
      -ms-transform: rotate(180deg);
       -o-transform: rotate(180deg);
          transform: rotate(180deg);
            display: inline-block;
}

/* - END MISC -  */



/* TESTING */

hr { border:0; height:1px;
    background-image: -webkit-linear-gradient(left, rgba(230,230,230,0), rgba(230,230,230,1) 30%, rgba(230,230,230,1) 70%, rgba(230,230,230,0));
    background-image:    -moz-linear-gradient(left, rgba(230,230,230,0), rgba(230,230,230,1) 30%, rgba(230,230,230,1) 70%, rgba(230,230,230,0));
    background-image:     -ms-linear-gradient(left, rgba(230,230,230,0), rgba(230,230,230,1) 30%, rgba(230,230,230,1) 70%, rgba(230,230,230,0));
    background-image:      -o-linear-gradient(left, rgba(230,230,230,0), rgba(230,230,230,1) 30%, rgba(230,230,230,1) 70%, rgba(230,230,230,0));
   }

hr { border:0; height:1px;
    background-image: -webkit-linear-gradient(left, rgba(230,230,230,0), rgba(230,230,230,1), rgba(230,230,230,0));
    background-image:    -moz-linear-gradient(left, rgba(230,230,230,0), rgba(230,230,230,1), rgba(230,230,230,0));
    background-image:     -ms-linear-gradient(left, rgba(230,230,230,0), rgba(230,230,230,1), rgba(230,230,230,0));
    background-image:      -o-linear-gradient(left, rgba(230,230,230,0), rgba(230,230,230,1), rgba(230,230,230,0));
   }

/* END TESTING */
/*

github.com style (c) Vasily Polovnyov <vast@whiteants.net>

*/

.hljs {
  display: block;
  padding: 0.5em;
  color: #333;
  background: #f8f8f8;
}

.hljs-comment,
.hljs-template_comment,
.diff .hljs-header,
.hljs-javadoc {
  color: #998;
  font-style: italic;
}

.hljs-keyword,
.css .rule .hljs-keyword,
.hljs-winutils,
.javascript .hljs-title,
.nginx .hljs-title,
.hljs-subst,
.hljs-request,
.hljs-status {
  color: #333;
  font-weight: bold;
}

.hljs-number,
.hljs-hexcolor,
.ruby .hljs-constant {
  color: #099;
}

.hljs-string,
.hljs-tag .hljs-value,
.hljs-phpdoc,
.tex .hljs-formula {
  color: #d14;
}

.hljs-title,
.hljs-id,
.coffeescript .hljs-params,
.scss .hljs-preprocessor {
  color: #900;
  font-weight: bold;
}

.javascript .hljs-title,
.lisp .hljs-title,
.clojure .hljs-title,
.hljs-subst {
  font-weight: normal;
}

.hljs-class .hljs-title,
.haskell .hljs-type,
.vhdl .hljs-literal,
.tex .hljs-command {
  color: #458;
  font-weight: bold;
}

.hljs-tag,
.hljs-tag .hljs-title,
.hljs-rules .hljs-property,
.django .hljs-tag .hljs-keyword {
  color: #000080;
  font-weight: normal;
}

.hljs-attribute,
.hljs-variable,
.lisp .hljs-body {
  color: #008080;
}

.hljs-regexp {
  color: #009926;
}

.hljs-symbol,
.ruby .hljs-symbol .hljs-string,
.lisp .hljs-keyword,
.tex .hljs-special,
.hljs-prompt {
  color: #990073;
}

.hljs-built_in,
.lisp .hljs-title,
.clojure .hljs-built_in {
  color: #0086b3;
}

.hljs-preprocessor,
.hljs-pragma,
.hljs-pi,
.hljs-doctype,
.hljs-shebang,
.hljs-cdata {
  color: #999;
  font-weight: bold;
}

.hljs-deletion {
  background: #fdd;
}

.hljs-addition {
  background: #dfd;
}

.diff .hljs-change {
  background: #0086b3;
}

.hljs-chunk {
  color: #aaa;
}
</style>
  </head>

  <body>

    <div class="content"><h1 id="mathematica">Mathematica</h1>
<pre><code>Clear["Global`*&quot;]
$PrePrint = If[MatrixQ[#], MatrixForm[#], #] &amp;;
</code></pre><h2 id="no-notebook">No notebook</h2>
<p>Write code in your favorite editor and run your code from a mathematica notebook by <code>Get[&quot;/path/to/file.wl&quot;];</code>. Or, run mathematica from console (cannot show <code>MatrixForm[..]</code> etc by using.</p>
<pre><code class="sh">$ math -noprompt -run &lt; code.txt
$ math -noprompt -run <span class="hljs-string">"&lt;&lt;test.txt; Exit[];"</span>
$ math -noprompt -run <span class="hljs-string">"Print[TeXForm[Integrate[Cos[x], x]]]; Exit[];"</span>
$ <span class="hljs-built_in">echo</span> <span class="hljs-_">-e</span> <span class="hljs-string">"TeXForm[Integrate[Cos[x], x]]\nExit[]"</span> | math -noprompt -run
$ math -script code.txt
</code></pre>
<ul>
<li><code>-run</code> treats <code>code.txt</code> as a notebook while <code>-script</code> treats <code>code.txt</code> like &quot;ordinary code&quot;.</li>
<li><code>-script</code> requires <code>Print[..]</code> for output while <code>-run</code> does not if reading from file (not stdinput).</li>
<li><code>-script</code> does not support <code>TeXForm</code> and <code>MatrixForm</code>.</li>
</ul>
<p>Mathematica support for Sublime Text: <a href="https://github.com/ViktorQvarfordt/Sublime-Mathematica">https://github.com/ViktorQvarfordt/Sublime-Mathematica</a>.</p>
<h2 id="quantum-information">Quantum information</h2>
<h3 id="bras-and-kets">Bras and kets</h3>
<pre><code class="mathematica">bra[str_] := {Flatten[Apply[TensorProduct, Map[If[#1 == "0", {1, 0}, {0, 1}] &amp;, <span class="hljs-keyword">Characters</span>[str]]]]};
ket[str_] := <span class="hljs-keyword">Transpose</span>[bra[str]];
</code></pre>
<p><strong>Usage example:</strong></p>
<pre><code class="mathematica">bra[<span class="hljs-string">"010"</span>] <span class="hljs-comment">(* row vector: {{0, 0, 1, 0, 0, 0, 0, 0}} *)</span>
ket[<span class="hljs-string">"010"</span>] <span class="hljs-comment">(* col vector: {{0}, {0}, {1}, {0}, {0}, {0}, {0}, {0}} *)</span>
bra[<span class="hljs-string">"000"</span>].ket[<span class="hljs-string">"001"</span>] <span class="hljs-comment">(* 0 *)</span>
bra[<span class="hljs-string">"000"</span>].ket[<span class="hljs-string">"000"</span>] <span class="hljs-comment">(* 1 *)</span>
ket[<span class="hljs-string">"000"</span>].bra[<span class="hljs-string">"000"</span>] <span class="hljs-comment">(* the correct matrix *)</span>
<span class="hljs-keyword">ConjugateTranspose</span>[ket[<span class="hljs-string">"010"</span>]] == bra[<span class="hljs-string">"010"</span>] <span class="hljs-comment">(* True *)</span>
</code></pre>
<h3 id="tensor-products">Tensor products</h3>
<pre><code class="mathematica"><span class="hljs-keyword">CircleTimes</span>[x__] := <span class="hljs-keyword">KroneckerProduct</span>[x];
i = <span class="hljs-keyword">IdentityMatrix</span>[<span class="hljs-number">2</span>];
σ<span class="hljs-number">1</span> = <span class="hljs-keyword">PauliMatrix</span>[<span class="hljs-number">1</span>];
σ<span class="hljs-number">2</span> = <span class="hljs-keyword">PauliMatrix</span>[<span class="hljs-number">2</span>];
σ<span class="hljs-number">3</span> = <span class="hljs-keyword">PauliMatrix</span>[<span class="hljs-number">3</span>];
σ<span class="hljs-number">1</span>⊗σ<span class="hljs-number">3</span>
</code></pre>
<h3 id="direct-sum">Direct sum</h3>
<pre><code class="mathematica">DirectSum[list_] := <span class="hljs-keyword">ArrayFlatten</span>[<span class="hljs-keyword">ReleaseHold</span>[<span class="hljs-keyword">DiagonalMatrix</span>[<span class="hljs-keyword">Hold</span> /@ list]]]
</code></pre>
<h3 id="plot-complex-eigenvalues">Plot complex eigenvalues</h3>
<pre><code class="mathematica">ComplexToPolar[z_] /; z \[<span class="hljs-keyword">Element</span>] <span class="hljs-keyword">Complexes</span> :=
  <span class="hljs-keyword">Module</span>[{w}, w = <span class="hljs-keyword">FullSimplify</span>[z]; <span class="hljs-keyword">Abs</span>[w] <span class="hljs-keyword">Exp</span>[<span class="hljs-keyword">I</span> <span class="hljs-keyword">Arg</span>[w]]];
ShowEV[A_] := <span class="hljs-keyword">Module</span>[{ev, evNoDupes, p},
   ev = <span class="hljs-keyword">Eigenvalues</span>[A];
   evNoDupes = <span class="hljs-keyword">DeleteDuplicates</span>[ev];
   <span class="hljs-keyword">Print</span>[<span class="hljs-keyword">Length</span>[evNoDupes], <span class="hljs-string">" of "</span>, <span class="hljs-keyword">Length</span>[ev], <span class="hljs-string">" distinct "</span>,
    ComplexToPolar[evNoDupes]];
   p = <span class="hljs-keyword">ListPlot</span>[{Re[#], Im[#]} &amp; /@ evNoDupes, <span class="hljs-keyword">AxesOrigin</span> -&gt; {0, 0},
     <span class="hljs-keyword">PlotRange</span> -&gt; {{-1.2, 1.2}, {-1.2, 1.2}}, <span class="hljs-keyword">AspectRatio</span> -&gt; <span class="hljs-number">1</span>,
     <span class="hljs-keyword">Frame</span> -&gt; <span class="hljs-keyword">True</span>, <span class="hljs-keyword">PlotStyle</span> -&gt; <span class="hljs-keyword">Directive</span>[<span class="hljs-keyword">Red</span>, <span class="hljs-keyword">PointSize</span>[<span class="hljs-number">.025</span>]]];
   <span class="hljs-keyword">Show</span>[p, <span class="hljs-keyword">Graphics</span>[{Thickness[0.003], Circle[{0, 0}, <span class="hljs-number">1</span>]}]]
   ];
</code></pre>
<h3 id="partial-trace">Partial trace</h3>
<p>WARNING: This gives is wring by a factor of 2, sometimes?</p>
<p>The partial trace $\mathrm{tr}\_\alpha(\rho)$ can be computed with</p>
<p>\begin{equation}
  \operatorname{tr}\_1(A\_{12}) = \sum\_i \langle i \rvert\_1 A\_{12} \lvert i \rangle\_1 = \sum\_i (\langle i \rvert \otimes I) \rvert A\_{12} (\lvert i \rangle \otimes I)
\end{equation}</p>
<p>which can be implemented as</p>
<pre><code class="mathematica">pTr[A_, k_] := <span class="hljs-keyword">Module</span>[{n, indices, bbra, kket},
  n = <span class="hljs-keyword">Log</span>[<span class="hljs-number">2</span>, <span class="hljs-keyword">Dimensions</span>[A][[<span class="hljs-number">1</span>]]];
  indices = <span class="hljs-keyword">Characters</span>[<span class="hljs-keyword">Table</span>[<span class="hljs-keyword">IntegerString</span>[j, <span class="hljs-number">2</span>, n<span class="hljs-number">-1</span>], {j, 0, 2^(n-1) - 1}]];
  <span class="hljs-comment">(* bbra = |i&gt;⊗I *)</span>
  bbra[i_] := <span class="hljs-keyword">Module</span>[{jj},
    jj = <span class="hljs-number">0</span>;
    <span class="hljs-keyword">Apply</span>[<span class="hljs-keyword">KroneckerProduct</span>, <span class="hljs-keyword">Table</span>[
      <span class="hljs-keyword">If</span>[
        <span class="hljs-keyword">MemberQ</span>[k, j] ∨ j == k,
        jj++; bra[i[[jj]]],
        <span class="hljs-keyword">IdentityMatrix</span>[<span class="hljs-number">2</span>]
      ], {j, 1, n}]]];
  <span class="hljs-keyword">FullSimplify</span>[<span class="hljs-keyword">Sum</span>[bbra[i] . A . <span class="hljs-keyword">ConjugateTranspose</span>[bbra[i]], {i, indices}]]];
</code></pre>
<p><strong>Usage:</strong></p>
<pre><code class="mathematica">pTr(ρ, <span class="hljs-number">2</span>)     <span class="hljs-comment">(* trace out subsystem 2 *)</span>
pTr(ρ, {2})   <span class="hljs-comment">(* trace out subsystem 2 *)</span>
pTr(ρ, {1,2}) <span class="hljs-comment">(* trace out subsystem 1 and 2)</span>
</code></pre>
<p><strong>Example:</strong></p>
<p>Consider three qubits. The state space is the hilbert space $\mathcal{H}\_1\otimes\mathcal{H}\_2\otimes\mathcal{H}\_3$. A state can be written $\lvert\psi\rangle = c\_0\lvert 000\rangle + c\_1\lvert 001\rangle + \cdots + c\_7\lvert 111\rangle$. The corresponding (pure) density matrix is then $\rho = \lvert\psi\rangle \langle\psi\rvert$. The corresponding reduced density operator $\rho\_1 = \operatorname{tr}\_{23}(\rho)$ is</p>
<pre><code class="mathematica"><span class="hljs-keyword">$Assumptions</span> = {α ∈ Reals, β ∈ Reals};
ψ = <span class="hljs-keyword">Sqrt</span>[<span class="hljs-number">2</span>/<span class="hljs-number">3</span>] (α ket[<span class="hljs-string">"000"</span>] - β ket[<span class="hljs-string">"111"</span>]) -
         α/<span class="hljs-keyword">Sqrt</span>[<span class="hljs-number">6</span>] (ket[<span class="hljs-string">"011"</span>] + ket[<span class="hljs-string">"101"</span>]) +
         β/<span class="hljs-keyword">Sqrt</span>[<span class="hljs-number">6</span>] (ket[<span class="hljs-string">"010"</span>] + ket[<span class="hljs-string">"100"</span>]);
ρ = ψ.<span class="hljs-keyword">ConjugateTranspose</span>[ψ] // <span class="hljs-keyword">FullSimplify</span>;
ρ // <span class="hljs-keyword">MatrixForm</span>
ρ<span class="hljs-number">1</span> = pTr[ρ, {2,3}] // <span class="hljs-keyword">FullSimplify</span> // <span class="hljs-keyword">Expand</span> // <span class="hljs-keyword">MatrixForm</span>
</code></pre>
<h2 id="misc">Misc.</h2>
<p>Parse LaTeX:</p>
<pre><code class="mathematica"><span class="hljs-keyword">ToExpression</span>[<span class="hljs-string">"\\sqrt{x y}"</span>, <span class="hljs-keyword">TeXForm</span>]
</code></pre>
<p>Separate contexts/scopes for notebooks: <a href="http://stackoverflow.com/a/4897013">http://stackoverflow.com/a/4897013</a></p>
<!--

```mathematica
print[x_] := Module[{str="", widths, prepad, postpad, prepadstr, postpadstr},
  widths = Array[0&, Length[x[[1]]]];
  Do[
    Do[
      widths[[k]] = Max[widths[[k]], StringLength[ToString[row[[k]]]]],
      {k, Length[row]}
    ],
    {row, x}
  ];
  Do[
    Do[
      prepad =  Floor[(widths[[k]] - StringLength[ToString[row[[k]]]])/2];
      If[prepad > 0, prepadstr = StringRepeat[" ", prepad], prepadstr = ""];
      postpad = Ceiling[  (widths[[k]] - StringLength[ToString[row[[k]]]])/2];
      If[postpad > 0, postpadstr = StringRepeat[" ", postpad], postpadstr = ""];
      str = str <>
            " ∣ " <>
            prepadstr <>
            ToString[row[[k]]] <>
            postpadstr
      , {k, Length[row]}];
    str = str <> " ∣\n",
    {row, x}
  ];
  WriteString[$Output, str, "\n"]
]
print[{
  {11111,222},
  {3,444444}}
]
```

-->
</div>

    <!-- <div class="footer-separator"></div> -->
    <!-- <div class="footer"><div class="footer-inner">Viktor Qvarfordt</div></div> -->

    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
      MathJax.Hub.Config({
        messageStyle: 'none',
        tex2jax: {
          inlineMath: [['$', '$'], ['\\(', '\\)']],
          processEscapes: true
        },
        'HTML-CSS': {
          availableFonts: ['TeX'],
        }
      });
    </script>

  </body>

</html>
