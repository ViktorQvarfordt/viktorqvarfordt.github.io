<html>
  <head>
    <link rel="stylesheet" href="/assets/notes.css">
    <link rel="stylesheet" href="/assets/hljs-github.css">
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        messageStyle: "none",
        tex2jax: {
          inlineMath: [["$", "$"], ["\\(", "\\)"]],
          processEscapes: true
        },
        "HTML-CSS": {
          availableFonts: ["TeX"]
        }
      });
    </script>
    <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
  </head>
  <body>
    <div class="content"><h1 id="ssh-proxy-browser-the-web-over-an-ssh-tunnel">SSH Proxy: Browser the web over an ssh tunnel</h1>
<p>An outline of how to set up an ssh tunnel that can be used with a web browser. The first section covers the most common use case, while the second section outlines how to set up a tunnel through multiple computers.</p>
<h2 id="tunnel-through-one-computer">Tunnel through one computer</h2>
<p>Set up the tunnel to <code>host</code> on localhost port 8080:</p>
<pre><code><span class="hljs-variable">$ </span>ssh -<span class="hljs-constant">ND</span> <span class="hljs-number">8080</span> user<span class="hljs-variable">@host</span>
</code></pre><p>Configure the browser to connect to this <code>SOCKS5</code> proxy.</p>
<p><strong>Firefox:</strong> Edit -&gt; Preferences -&gt; Advanced -&gt; Network -&gt; Settings -&gt; Manual proxy configuration: Fill in SOCKS Host and port, leave the rest blank.</p>
<p><strong>Google chrome:</strong> (on linux)</p>
<pre><code>$ google<span class="hljs-attribute">-chrome</span> <span class="hljs-subst">--</span>proxy<span class="hljs-attribute">-server</span><span class="hljs-subst">=</span>socks5:<span class="hljs-comment">//localhost:8080 --user-data-dir=/tmp/tmpuser</span>
</code></pre><p>The last argument ensures we get a clean browser session.</p>
<h2 id="tunnel-through-several-computers">Tunnel through several computers</h2>
<p>Assume <code>desktop</code> wants to access the web through a tunnel going through <code>host1</code> and <code>host2</code> (that is, <code>desktop</code> will use the ip of <code>host2</code> on the web).</p>
<pre><code><span class="hljs-title">desktop</span> -&gt; host1 -&gt; host2 -&gt; internet
</code></pre><p>On <code>desktop</code> (and every host in the tunnel-chain, except the next-to-last host) we run</p>
<pre><code><span class="hljs-variable">$ </span>ssh -<span class="hljs-constant">N</span> user<span class="hljs-variable">@host1</span> -<span class="hljs-constant">L</span> <span class="hljs-number">8080</span><span class="hljs-symbol">:localhost</span><span class="hljs-symbol">:</span><span class="hljs-number">8080</span>
</code></pre><p>On <code>host1</code> (the &quot;next-to-last&quot; machine) we run (just like in case of a direct tunnel)</p>
<pre><code><span class="hljs-variable">$ </span>ssh -<span class="hljs-constant">ND</span> <span class="hljs-number">8080</span> user<span class="hljs-variable">@host2</span>
</code></pre><hr>
<p><em>Of course, consult the man page of ssh for a description of the flags etc.</em></p>
</div>
    <!-- <div class="footer-separator"></div> -->
    <!-- <div class="footer"><div class="footer-inner">Viktor Qvarfordt</div></div> -->
  </body>
</html>