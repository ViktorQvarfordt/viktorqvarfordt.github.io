<html>
  <head>
    <link rel="stylesheet" href="/assets/notes.css">
    <link rel="stylesheet" href="/assets/hljs-github.css">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <script type="text/x-mathjax-config">
      MathJax.Hub.Config({
        messageStyle: "none",
        tex2jax: {
          inlineMath: [["$", "$"], ["\\(", "\\)"]],
          processEscapes: true
        },
        "HTML-CSS": {
          availableFonts: ["TeX"]
        }
      });
    </script>
    <script src="//cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
  </head>
  <body>
    <div class="content"><h1 id="user-scripts">User scripts</h1>
<p>Consult <a href="http://wiki.greasespot.net/Metadata_Block">this</a> for how to customize the meta block, in particular the include and exclude <a href="http://wiki.greasespot.net/Include_and_exclude_rules">rules</a>.</p>
<ul>
<li><a href="#google-search-tweaks">Google search tweaks</a></li>
<li><a href="#mathjax-on-any-website">MathJax on any website</a></li>
</ul>
<h2 id="google-search-tweaks">Google search tweaks</h2>
<pre><code class="js">// ==UserScript==
// @name        Google search tweaks
// @description Blocks ads and sponsored links. Adds shortcuts for selecting search results.
// @author      Viktor Qvarfordt
// @match       https://www.google.se/search*
// @version     2016-02-06
// @grant       none
// ==/UserScript==

'use strict'

function addGlobalStyle(css) {
  const head = document.getElementsByTagName('head')[0]
  if (!head) { return; }
  const style = document.createElement('style')
  style.type = 'text/css'
  style.innerHTML = css
  head.appendChild(style)
}

// Attempt to hide ads.
addGlobalStyle(`
  iframe[name='google_ads_frame'],
  a[href^='http://pagead2.googlesyndication.com'] {
    display: none ! important;
  }`)

// Remove ad search results.
tvcap.remove()

// Shortcuts for selecting search results.
const gs = document.getElementsByClassName('g')
for (let i = 0; i &lt; gs.length &amp;&amp; i &lt; 9; i++) {
  gs[i].style.position = 'relative'
  gs[i].innerHTML = `&lt;span style="position: absolute; left: -20px; top: 4px;"&gt;${i+1}&lt;/span&gt;${gs[i].innerHTML}`
  document.addEventListener('keydown', e =&gt; {
      if (e.keyCode === String(i+1).charCodeAt(0) || (e.keyCode === 13 &amp;&amp; i === 0)) {
        const link = gs[i].querySelector('.r a')
        link.style['font-weight'] = 'bold'
        window.location = link.href
      }
  })
}

// ...but not from the search bar.
window['lst-ib'].addEventListener('keydown', e =&gt; e.stopPropagation())
</code></pre>
<h2 id="mathjax-on-any-website">MathJax on any website</h2>
<pre><code class="js"><span class="hljs-comment">// ==UserScript==</span>
<span class="hljs-comment">// @name        MathJax Trello</span>
<span class="hljs-comment">// @description    Apply Mathjax to Trello</span>
<span class="hljs-comment">// @include     https://trello.com/*</span>
<span class="hljs-comment">// @grant       none</span>
<span class="hljs-comment">// ==/UserScript==</span>

<span class="hljs-keyword">if</span> (window.MathJax === <span class="hljs-literal">undefined</span>) {
  <span class="hljs-keyword">var</span> script = document.createElement(<span class="hljs-string">"script"</span>);
  script.type = <span class="hljs-string">"text/javascript"</span>;
  script.src = <span class="hljs-string">"https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"</span>;
  script.text = <span class="hljs-string">'MathJax.Hub.Config({'</span>
              + <span class="hljs-string">'  messageStyle: "none",'</span>
              + <span class="hljs-string">'  tex2jax: {'</span>
              + <span class="hljs-string">'    inlineMath: [["$", "$"], ["\\\\(", "\\\\)"]],'</span>
              + <span class="hljs-string">'    processEscapes: true'</span>
              + <span class="hljs-string">'  },'</span>
              + <span class="hljs-string">'  "HTML-CSS": {'</span>
              + <span class="hljs-string">'    availableFonts: ["TeX"]'</span>
              + <span class="hljs-string">'  }'</span>
              + <span class="hljs-string">'});'</span>
              <span class="hljs-comment">// Run mathjax every second (the overhead is very low).</span>
              + <span class="hljs-string">'(function doMathJax() {'</span>
              + <span class="hljs-string">'  window.setTimeout(doMathJax, 1000);'</span>
              + <span class="hljs-string">'  window.MathJax.Hub.Queue(["Typeset", window.MathJax.Hub]);'</span>
              + <span class="hljs-string">'})();'</span>;
  document.getElementsByTagName(<span class="hljs-string">"head"</span>)[<span class="hljs-number">0</span>].appendChild(script);
} <span class="hljs-keyword">else</span> {
  MathJax.Hub.Queue([<span class="hljs-string">"Typeset"</span>, MathJax.Hub]);
}
</code></pre>
</div>
    <!-- <div class="footer-separator"></div> -->
    <!-- <div class="footer"><div class="footer-inner">Viktor Qvarfordt</div></div> -->
  </body>
</html>